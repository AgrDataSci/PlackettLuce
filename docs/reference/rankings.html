<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Rankings Object — rankings • PlackettLuce</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">PlackettLuce</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Overview.html">Introduction to PlackettLuce</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Rankings Object</h1>
    </div>

    
    <p>Create a <code>"rankings"</code> object from data or convert a matrix of rankings
or ordered items to a <code>"rankings"</code> object.</p>
    

    <pre class="usage">rankings(data, id, item, rank, verbose = TRUE, ...)

as.rankings(x, input = c("ranking", "ordering"), labels = NULL,
  verbose = TRUE, ...)

# S3 method for default
as.rankings(x, input = c("ranking", "ordering"),
  labels = NULL, verbose = TRUE, ...)

# S3 method for matrix
as.rankings(x, input = c("ranking", "ordering"),
  labels = NULL, verbose = TRUE, ...)

# S3 method for rankings
[(x, i, j, ..., drop = TRUE, as.rankings = TRUE)

# S3 method for rankings
format(x, width = 40, ...)

# S3 method for rankings
rbind(..., labels = NULL)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>a data frame with columns specified by <code>id</code>, <code>item</code> and
<code>rank</code>.</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>an index of <code>data</code> specifying the column containing ranking
IDs.</p></td>
    </tr>
    <tr>
      <th>item</th>
      <td><p>an index of <code>data</code> specifying the column containing item
IDs,</p></td>
    </tr>
    <tr>
      <th>rank</th>
      <td><p>an index of <code>data</code> specifying the column containing item
ranks.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>logical; if <code>TRUE</code> print messages when changes are made
to rankings data.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>further arguments passed to/from methods.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>for <code>as.rankings</code>, a matrix with one column per item and one
row per ranking, or an object that can be coerced to such as matrix; for
<code>[</code> and <code>format</code>, a <code>"rankings"</code> object.</p></td>
    </tr>
    <tr>
      <th>input</th>
      <td><p>for <code>as.rankings</code>, whether each row in the input matrix
contains a numeric <code>"ranking"</code> (dense, standard/modified competition or
fractional ranking) or an <code>"ordering"</code>, i.e. the items ordered by rank.</p></td>
    </tr>
    <tr>
      <th>labels</th>
      <td><p>for <code>input = "ordering"</code> an optional vector of labels for
the items. If <code>NULL</code>, the items will be labelled by the sorted unique
values of <code>x</code>.</p></td>
    </tr>
    <tr>
      <th>i</th>
      <td><p>indices specifying rankings to extract, as for <code>[</code>.</p></td>
    </tr>
    <tr>
      <th>j</th>
      <td><p>indices specifying items to extract, as for <code>[</code>.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>if <code>TRUE</code> return single row/column matrices as a vector.</p></td>
    </tr>
    <tr>
      <th>as.rankings</th>
      <td><p>if <code>TRUE</code> return a rankings object, otherwise return
a matrix/vector.</p></td>
    </tr>
    <tr>
      <th>width</th>
      <td><p>the width in number of characters to format each ranking -
rankings that are too wide will be truncated.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a <code>"rankings"</code> object, which is a matrix of dense rankings
with one attribute <code>omit</code> the indices of any rankings that were
omitted due to insufficient data (less than two non-missing ranks).</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Each ranking in the input data will be converted to a dense ranking, which
rank items from 1 (first place) to \(n_r\) (last place). Items not ranked
should have a rank of 0. Tied items are given the same rank with no rank
skipped. For example 1, 0, 2, 1, ranks the first and fourth items in
first place and the third item in second place; the second item is unranked.</p>
<p>Rankings with less than 2 items are dropped.</p>
<p>The method for <code>[</code> will return a reduced rankings object by default,
recoding and dropping invalid rankings as necessary. To extract rows
and/or columns of the rankings as a matrix or vector,
set <code>as.rankings = FALSE</code>, see examples.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># create rankings from data in long form</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>ranking</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fu'>rep</span>(<span class='fl'>1</span>:<span class='fl'>4</span>, <span class='kw'>each</span> <span class='kw'>=</span> <span class='fl'>4</span>), <span class='fl'>5</span>, <span class='fl'>5</span>, <span class='fl'>5</span>),
                <span class='kw'>letter</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='no'>LETTERS</span>[<span class='fu'>c</span>(<span class='fl'>1</span>:<span class='fl'>3</span>, <span class='fl'>3</span>, <span class='fl'>1</span>:<span class='fl'>4</span>, <span class='fl'>2</span>:<span class='fl'>5</span>, <span class='fl'>1</span>:<span class='fl'>2</span>, <span class='fl'>1</span>)], <span class='fl'>NA</span>,
                           <span class='no'>LETTERS</span>[<span class='fl'>3</span>:<span class='fl'>5</span>]),
                <span class='kw'>rank</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>4</span>:<span class='fl'>1</span>, <span class='fu'>rep</span>(<span class='fl'>NA</span>, <span class='fl'>4</span>), <span class='fl'>3</span>:<span class='fl'>4</span>, <span class='fl'>NA</span>, <span class='fl'>NA</span>, <span class='fl'>1</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>2</span>, <span class='fl'>2</span>, <span class='fl'>2</span>, <span class='fl'>3</span>))
<span class='co'># ranking 1 has different rank for same item, but order of items unambiguous</span>
<span class='co'># all ranks are missing in ranking 2</span>
<span class='co'># some ranks are missing in ranking 3</span>
<span class='co'># ranking 4 has inconsistent ranks for two items and a rank with missing item</span>
<span class='co'># ranking 5 is fine - an example of a tie</span>
<span class='fu'>split</span>(<span class='no'>x</span>, <span class='no'>x</span>$<span class='no'>ranking</span>)</div><div class='output co'>#&gt; $`1`
#&gt;   ranking letter rank
#&gt; 1       1      A    4
#&gt; 2       1      B    3
#&gt; 3       1      C    2
#&gt; 4       1      C    1
#&gt; 
#&gt; $`2`
#&gt;   ranking letter rank
#&gt; 5       2      A   NA
#&gt; 6       2      B   NA
#&gt; 7       2      C   NA
#&gt; 8       2      D   NA
#&gt; 
#&gt; $`3`
#&gt;    ranking letter rank
#&gt; 9        3      B    3
#&gt; 10       3      C    4
#&gt; 11       3      D   NA
#&gt; 12       3      E   NA
#&gt; 
#&gt; $`4`
#&gt;    ranking letter rank
#&gt; 13       4      A    1
#&gt; 14       4      B    3
#&gt; 15       4      A    4
#&gt; 16       4   &lt;NA&gt;    2
#&gt; 
#&gt; $`5`
#&gt;    ranking letter rank
#&gt; 17       5      C    2
#&gt; 18       5      D    2
#&gt; 19       5      E    3
#&gt; </div><div class='input'><span class='co'># fix issues when creating rankings object</span>
<span class='fu'>rankings</span>(<span class='no'>x</span>, <span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"ranking"</span>, <span class='kw'>item</span> <span class='kw'>=</span> <span class='st'>"letter"</span>, <span class='kw'>rank</span> <span class='kw'>=</span> <span class='st'>"rank"</span>)</div><div class='output co'>#&gt; <span class='message'>Removed records with unknown id, item or rank</span></div><div class='output co'>#&gt; <span class='message'>Duplicated items within rankings: removed redundant/inconsistent ranks.</span></div><div class='output co'>#&gt; <span class='message'>Recoded rankings that are not in dense form</span></div><div class='output co'>#&gt; <span class='message'>Removed rankings with less than 2 items</span></div><div class='output co'>#&gt;           1           3           5 
#&gt; "C &gt; B &gt; A"     "B &gt; C" "C = D &gt; E" </div><div class='input'>
<span class='co'># convert existing matrix of rankings</span>
<span class='no'>R</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>0</span>, <span class='fl'>0</span>,
              <span class='fl'>4</span>, <span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>,
              <span class='fl'>2</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>1</span>,
              <span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>0</span>,
              <span class='fl'>2</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>0</span>,
              <span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>3</span>, <span class='fl'>2</span>), <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fl'>6</span>, <span class='kw'>byrow</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'>colnames</span>(<span class='no'>R</span>) <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"apple"</span>, <span class='st'>"banana"</span>, <span class='st'>"orange"</span>, <span class='st'>"pear"</span>)
<span class='no'>R</span> <span class='kw'>&lt;-</span> <span class='fu'>as.rankings</span>(<span class='no'>R</span>)
<span class='co'># first three rankings</span>
<span class='no'>R</span>[<span class='fl'>1</span>:<span class='fl'>3</span>,]</div><div class='output co'>#&gt; [1] "apple &gt; banana"                 "banana &gt; orange &gt; pear &gt; apple"
#&gt; [3] "banana = orange = pear &gt; apple"</div><div class='input'><span class='co'># exclude pear from the rankings</span>
<span class='no'>R</span>[, -<span class='fl'>4</span>]</div><div class='output co'>#&gt; <span class='message'>Recoded rankings that are not in dense form</span></div><div class='output co'>#&gt; [1] "apple &gt; banana"          "banana &gt; orange &gt; apple"
#&gt; [3] "banana = orange &gt; apple" "apple &gt; banana &gt; orange"
#&gt; [5] "banana = orange &gt; apple" "apple &gt; orange"         </div><div class='input'><span class='co'># extract rankings 2 and 3 as numeric matrix</span>
<span class='no'>R</span>[<span class='fl'>2</span>:<span class='fl'>3</span>, , <span class='kw'>as.rankings</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>]</div><div class='output co'>#&gt;      apple banana orange pear
#&gt; [1,]     4      1      2    3
#&gt; [2,]     2      1      1    1</div><div class='input'><span class='co'># same as</span>
<span class='fu'>unclass</span>(<span class='no'>R</span>)[<span class='fl'>2</span>:<span class='fl'>3</span>,]</div><div class='output co'>#&gt;      apple banana orange pear
#&gt; [1,]     4      1      2    3
#&gt; [2,]     2      1      1    1</div><div class='input'><span class='co'># extract rankings for item 1 as a vector</span>
<span class='no'>R</span>[,<span class='fl'>1</span>, <span class='kw'>as.rankings</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>]</div><div class='output co'>#&gt; [1] 1 4 2 1 2 1</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Heather Turner, Ioannis Kosmidis, David Firth.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
