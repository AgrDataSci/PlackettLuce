<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Preferred Bean Varieties in Nicaragua — beans • PlackettLuce</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">PlackettLuce</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Overview.html">Introduction to PlackettLuce</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/hturner/PlackettLuce">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Preferred Bean Varieties in Nicaragua</h1>
    </div>

    
    <p>This is a subset of data from trials of bean varieties in Nicaragua over five
growing seasons. Farmers were asked to try three variaties of bean from a
total of ten varieties and to rank them in order of preference. In addition,
for each variety the farmers were asked to compare each trial variety to the
local variety and state whether they considered it to be better or worse.</p>
    

    <pre class="usage"><span class='no'>beans</span></pre>
        
    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p>A data frame with 842 records and 11 variables:</p><dl class='dl-horizontal'>
    <dt><code>variety_a</code></dt><dd><p>The name of variety A in the comparison.</p></dd>
    <dt><code>variety_b</code></dt><dd><p>The name of variety B in the comparison.</p></dd>
    <dt><code>variety_c</code></dt><dd><p>The name of variety C in the comparison.</p></dd>
    <dt><code>best</code></dt><dd><p>The variety the farmer ranked in first place ("A",
    "B" or "C").</p></dd>
    <dt><code>worst</code></dt><dd><p>The variety the farmer ranked in last place ("A",
    "B" or "C").</p></dd>
    <dt><code>var_a</code></dt><dd><p>How the farmer ranked variety A compared to the local
    variety ("Worse" or "Better").</p></dd>
    <dt><code>var_b</code></dt><dd><p>How the farmer ranked variety B compared to the local
    variety ("Worse" or "Better").</p></dd>
    <dt><code>var_c</code></dt><dd><p>How the farmer ranked variety C compared to the local
    variety ("Worse" or "Better").</p></dd>
    <dt><code>season</code></dt><dd><p>A factor specifying the growing season ("Po - 15",
    "Ap - 15", "Pr - 16", "Po - 16", "Ap - 16".</p></dd>
    <dt><code>year</code></dt><dd><p>The year of planting.</p></dd>
    <dt><code>maxTN</code></dt><dd><p>The maximum temperature at night during the
    vegetative cycle (degrees Celsius).</p></dd>
</dl>
    
    <h2 class="hasAnchor" id="source"><a class="anchor" href="#source"></a>Source</h2>

    <p>The data were provided by Bioversity International, a CGIAR research
centre <a href='https://www.bioversityinternational.org'>https://www.bioversityinternational.org</a>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>There are three crop seasons in Central America:</p><dl class='dl-horizontal'>
    <dt>Primera</dt><dd><p>May - August.</p></dd>
    <dt>Postrera</dt><dd><p>September - October.</p></dd>
    <dt>Apante</dt><dd><p>November - January.</p></dd>
</dl><p>Beans can be planted near the beginning of each season, though are most
commonly planted in the Postrera or Apante seasons.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># convert best and worse variety to numeric (A = 1, B = 2, C = 3)</span>
<span class='co'># infer value of middle variety (given values must sum to 6)</span>
<span class='no'>beans</span> <span class='kw'>&lt;-</span> <span class='fu'>within</span>(<span class='no'>beans</span>, {
    <span class='no'>best</span> <span class='kw'>&lt;-</span> <span class='fu'>match</span>(<span class='no'>best</span>, <span class='fu'>c</span>(<span class='st'>"A"</span>, <span class='st'>"B"</span>, <span class='st'>"C"</span>))
    <span class='no'>worst</span> <span class='kw'>&lt;-</span> <span class='fu'>match</span>(<span class='no'>worst</span>, <span class='fu'>c</span>(<span class='st'>"A"</span>, <span class='st'>"B"</span>, <span class='st'>"C"</span>))
    <span class='no'>middle</span> <span class='kw'>&lt;-</span> <span class='fl'>6</span> - <span class='no'>best</span> - <span class='no'>worst</span>
})
<span class='fu'>head</span>(<span class='no'>beans</span>[<span class='fu'>c</span>(<span class='st'>"best"</span>, <span class='st'>"middle"</span>, <span class='st'>"worst"</span>)], <span class='fl'>3</span>)</div><div class='output co'>#&gt; # A tibble: 3 x 3
#&gt;    best middle worst
#&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;int&gt;
#&gt; 1    NA     NA    NA
#&gt; 2    NA     NA    NA
#&gt; 3    NA     NA    NA</div><div class='input'>

<span class='co'># convert numeric ordering to ordering of variety names</span>
<span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fu'>nrow</span>(<span class='no'>beans</span>)
<span class='no'>varieties</span> <span class='kw'>&lt;-</span> <span class='fu'>as.matrix</span>(<span class='no'>beans</span>[<span class='fu'>c</span>(<span class='st'>"variety_a"</span>, <span class='st'>"variety_b"</span>, <span class='st'>"variety_c"</span>)])
<span class='no'>beans</span> <span class='kw'>&lt;-</span> <span class='fu'>within</span>(<span class='no'>beans</span>, {
    <span class='no'>best</span> <span class='kw'>&lt;-</span> <span class='no'>varieties</span>[<span class='fu'>cbind</span>(<span class='fu'>seq_len</span>(<span class='no'>n</span>), <span class='no'>best</span>)]
    <span class='no'>worst</span> <span class='kw'>&lt;-</span> <span class='no'>varieties</span>[<span class='fu'>cbind</span>(<span class='fu'>seq_len</span>(<span class='no'>n</span>), <span class='no'>worst</span>)]
    <span class='no'>middle</span> <span class='kw'>&lt;-</span> <span class='no'>varieties</span>[<span class='fu'>cbind</span>(<span class='fu'>seq_len</span>(<span class='no'>n</span>), <span class='no'>middle</span>)]
})
<span class='fu'>head</span>(<span class='no'>beans</span>[<span class='fu'>c</span>(<span class='st'>"best"</span>, <span class='st'>"middle"</span>, <span class='st'>"worst"</span>)], <span class='fl'>3</span>)</div><div class='output co'>#&gt; # A tibble: 3 x 3
#&gt;    best middle worst
#&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;
#&gt; 1  &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;
#&gt; 2  &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;
#&gt; 3  &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;</div><div class='input'>
<span class='co'># create rankings object from rankings of order three</span>
<span class='co'>## each ranking is a ranking of three varieties from the full set</span>
<span class='no'>lab</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"Local"</span>, <span class='fu'>sort</span>(<span class='fu'>unique</span>(<span class='fu'>as.vector</span>(<span class='no'>varieties</span>))))
<span class='no'>R</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='rankings.html'>as.rankings</a></span>(<span class='no'>beans</span>[<span class='fu'>c</span>(<span class='st'>"best"</span>, <span class='st'>"middle"</span>, <span class='st'>"worst"</span>)],
                 <span class='kw'>input</span> <span class='kw'>=</span> <span class='st'>"ordering"</span>, <span class='kw'>labels</span> <span class='kw'>=</span> <span class='no'>lab</span>)</div><div class='output co'>#&gt; <span class='error'>Error in if (!is.null(labels) &amp;&amp; length(labels) &gt; m) {    unused &lt;- length(labels) - m    x &lt;- cbind(x, matrix(0, nrow = nrow(x), ncol = unused))    m &lt;- m + unused}: missing value where TRUE/FALSE needed</span></div><div class='input'><span class='fu'>head</span>(<span class='no'>R</span>)</div><div class='output co'>#&gt; [1] "PM2 Don Rey &gt; SJC 730-79 &gt; BRT 103-182"  
#&gt; [2] "INTA Centro Sur &gt; INTA Sequia &gt; INTA ..."
#&gt; [3] "INTA Ferroso &gt; INTA Matagalpa &gt; BRT  ..."
#&gt; [4] "INTA Rojo &gt; INTA Centro Sur &gt; ALS 0532-6"
#&gt; [5] "PM2 Don Rey &gt; INTA Sequia &gt; SJC 730-79"  
#&gt; [6] "ALS 0532-6 &gt; INTA Matagalpa &gt; INTA Rojo" </div><div class='input'>
<span class='co'># convert worse/better columns to ordered pairs</span>
<span class='fu'>head</span>(<span class='no'>beans</span>[<span class='fu'>c</span>(<span class='st'>"var_a"</span>, <span class='st'>"var_b"</span>, <span class='st'>"var_c"</span>)], <span class='fl'>2</span>)</div><div class='output co'>#&gt; # A tibble: 2 x 3
#&gt;   var_a  var_b  var_c
#&gt;   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;
#&gt; 1 Worse  Worse Better
#&gt; 2 Worse Better Better</div><div class='input'><span class='no'>paired</span> <span class='kw'>&lt;-</span> <span class='fu'>list</span>()
<span class='kw'>for</span> (<span class='no'>id</span> <span class='kw'>in</span> <span class='fu'>c</span>(<span class='st'>"a"</span>, <span class='st'>"b"</span>, <span class='st'>"c"</span>)){
    <span class='no'>ordering</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='st'>"Local"</span>, <span class='kw'>nrow</span> <span class='kw'>=</span> <span class='no'>n</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>2</span>)
    <span class='no'>worse</span> <span class='kw'>&lt;-</span> <span class='no'>beans</span><span class='kw'>[[</span><span class='fu'>paste0</span>(<span class='st'>"var_"</span>, <span class='no'>id</span>)]] <span class='kw'>==</span> <span class='st'>"Worse"</span>
    <span class='co'>## put trial variety in column 1 when it is not worse than local</span>
    <span class='no'>ordering</span>[!<span class='no'>worse</span>, <span class='fl'>1</span>] <span class='kw'>&lt;-</span> <span class='no'>beans</span><span class='kw'>[[</span><span class='fu'>paste0</span>(<span class='st'>"variety_"</span>, <span class='no'>id</span>)]][!<span class='no'>worse</span>]
    <span class='co'>## put trial variety in column 2 when it is worse than local</span>
    <span class='no'>ordering</span>[<span class='no'>worse</span>, <span class='fl'>2</span>] <span class='kw'>&lt;-</span> <span class='no'>beans</span><span class='kw'>[[</span><span class='fu'>paste0</span>(<span class='st'>"variety_"</span>, <span class='no'>id</span>)]][<span class='no'>worse</span>]
    <span class='no'>paired</span><span class='kw'>[[</span><span class='no'>id</span>]] <span class='kw'>&lt;-</span> <span class='no'>ordering</span>
}
<span class='fu'>head</span>(<span class='no'>paired</span><span class='kw'>[[</span><span class='st'>"a"</span>]])</div><div class='output co'>#&gt;      [,1]              [,2]         
#&gt; [1,] "Local"           "BRT 103-182"
#&gt; [2,] "Local"           "INTA Rojo"  
#&gt; [3,] "INTA Ferroso"    "Local"      
#&gt; [4,] "INTA Centro Sur" "Local"      
#&gt; [5,] "INTA Sequia"     "Local"      
#&gt; [6,] "ALS 0532-6"      "Local"      </div><div class='input'>
<span class='co'># convert orderings to sub-rankings of full set and combine all rankings</span>
<span class='no'>paired</span> <span class='kw'>&lt;-</span> <span class='fu'>lapply</span>(<span class='no'>paired</span>, <span class='no'>as.rankings</span>, <span class='kw'>input</span> <span class='kw'>=</span> <span class='st'>"ordering"</span>, <span class='kw'>labels</span> <span class='kw'>=</span> <span class='no'>lab</span>)
<span class='no'>R</span> <span class='kw'>&lt;-</span> <span class='fu'>rbind</span>(<span class='no'>R</span>, <span class='no'>paired</span><span class='kw'>[[</span><span class='st'>"a"</span>]], <span class='no'>paired</span><span class='kw'>[[</span><span class='st'>"b"</span>]], <span class='no'>paired</span><span class='kw'>[[</span><span class='st'>"c"</span>]])
<span class='fu'>head</span>(<span class='no'>R</span>)</div><div class='output co'>#&gt; [1] "PM2 Don Rey &gt; SJC 730-79 &gt; BRT 103-182"  
#&gt; [2] "INTA Centro Sur &gt; INTA Sequia &gt; INTA ..."
#&gt; [3] "INTA Ferroso &gt; INTA Matagalpa &gt; BRT  ..."
#&gt; [4] "INTA Rojo &gt; INTA Centro Sur &gt; ALS 0532-6"
#&gt; [5] "PM2 Don Rey &gt; INTA Sequia &gt; SJC 730-79"  
#&gt; [6] "ALS 0532-6 &gt; INTA Matagalpa &gt; INTA Rojo" </div><div class='input'><span class='fu'>tail</span>(<span class='no'>R</span>)</div><div class='output co'>#&gt; [1] "INTA Sequia &gt; Local"    "INTA Sequia &gt; Local"    "BRT 103-182 &gt; Local"   
#&gt; [4] "Local &gt; INTA Matagalpa" "Local &gt; INTA Rojo"      "Local &gt; SJC 730-79"    </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#format">Format</a></li>

      <li><a href="#source">Source</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Heather Turner, Ioannis Kosmidis, David Firth.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
