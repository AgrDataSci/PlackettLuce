<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plackett-Luce Trees — pltree • PlackettLuce</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">PlackettLuce</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Overview.html">Introduction to PlackettLuce</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plackett-Luce Trees</h1>
    </div>

    
    <p>Recursive partitioning based on Plackett-Luce models.</p>
    

    <pre class="usage"><span class='fu'>pltree</span>(<span class='no'>formula</span>, <span class='no'>data</span>, <span class='no'>subset</span>, <span class='no'>na.action</span>, <span class='no'>cluster</span>, <span class='kw'>ref</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='co'># S3 method for pltree</span>
<span class='fu'>predict</span>(<span class='no'>object</span>, <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"itempar"</span>, <span class='st'>"rank"</span>,
  <span class='st'>"best"</span>, <span class='st'>"node"</span>), <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>a symbolic description of the model to be fitted, of the form
<code>y ~ x1 + ... + xn</code> where <code>y</code> should be an object of class
<code><a href='grouped_rankings.html'>grouped_rankings</a></code> and <code>x1</code>, &#8230;, <code>xn</code> are used as
 partitioning variables.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>an optional data frame containing the variables in the model.</p></td>
    </tr>
    <tr>
      <th>subset</th>
      <td><p>A specification of the rows to be used, passed to
<code>model.frame</code>.</p></td>
    </tr>
    <tr>
      <th>na.action</th>
      <td><p>how NAs are treated, passed to <code>model.frame</code>.</p></td>
    </tr>
    <tr>
      <th>cluster</th>
      <td><p>an optional vector of cluster IDs to be employed for clustered
covariances in the parameter stability tests, see <code><a href='http://www.rdocumentation.org/packages/partykit/topics/mob'>mob</a></code>.</p></td>
    </tr>
    <tr>
      <th>ref</th>
      <td><p>an integer or character string specifying the reference item (for
which log ability will be set to zero). If NULL the first item is used.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments, passed to <code><a href='PlackettLuce.html'>PlackettLuce</a></code> by
<code>pltree</code> and to <code><a href='http://www.rdocumentation.org/packages/psychotools/topics/itempar'>itempar</a></code> by <code>predict</code>.</p></td>
    </tr>
    <tr>
      <th>object</th>
      <td><p>a fitted model object of class <code>"pltree"</code>.</p></td>
    </tr>
    <tr>
      <th>newdata</th>
      <td><p>an optional data frame to use for prediction instead of the
original data.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>the type of prediction to return for each group, one of:
<code>"itempar"</code> to give the result of <code><a href='http://www.rdocumentation.org/packages/psychotools/topics/itempar'>itempar</a></code> (by default the
fitted probability of each item being ranked first out of all objects),
<code>"rank"</code> the corresponding rank, <code>"best"</code> the topped ranked item,
or <code>"node"</code> the node of the tree the group belongs to.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>"pltree"</code> inheriting from <code>"bttree"</code>
and <code>"modelparty"</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Plackett-Luce trees are an application of model-based recursive partitioning
(implemented in <code><a href='http://www.rdocumentation.org/packages/partykit/topics/mob'>mob</a></code>) to Plackett-Luce models for
rankings. The partitioning is based on ranking covariates, e.g. attributes of
the judge making the ranking, or conditions under which the ranking is made.
The response should be a <code><a href='grouped_rankings.html'>grouped_rankings</a></code> object that groups
rankings with common covariate values. This may be included in a data frame
alongside the covariates.</p>
<p>Various methods are provided for <code>"pltree"</code> objects, most of them
inherited from <code>"modelparty"</code> objects (e.g. <code>print</code>,
<code>summary</code>), or <code>"bttree"</code> objects (<code>plot</code>). <code>itempar</code>
extracts the abilities or item parameters from the Plackett-Luce models in
each node of the tree using <code><a href='itempar.PlackettLuce.html'>itempar.PlackettLuce</a></code>. The plot
method employs the <code><a href='http://www.rdocumentation.org/packages/psychotree/topics/node_btplot'>node_btplot</a></code>
panel-generating function.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='http://www.rdocumentation.org/packages/psychotree/topics/bttree'>bttree</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Bradley-Terry example</span>

<span class='kw'>if</span> (<span class='fu'>require</span>(<span class='no'>psychotree</span>)){
    <span class='co'>## Germany's Next Topmodel 2007 data</span>
    <span class='fu'>data</span>(<span class='st'>"Topmodel2007"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"psychotree"</span>)
    <span class='co'>## convert paircomp object to grouped rankings</span>
    <span class='no'>R</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='grouped_rankings.html'>as.grouped_rankings</a></span>(<span class='no'>Topmodel2007</span>$<span class='no'>preference</span>)
    <span class='co'>## rankings are grouped by judge</span>
    <span class='fu'>print</span>(<span class='no'>R</span>[<span class='fl'>1</span>:<span class='fl'>2</span>,], <span class='kw'>max</span> <span class='kw'>=</span> <span class='fl'>6</span>)
    <span class='co'>## Topmodel2007[, -1] gives covariate values for each judge</span>
    <span class='fu'>head</span>(<span class='no'>Topmodel2007</span>[, -<span class='fl'>1</span>], <span class='fl'>2</span>)

    <span class='co'>## fit partition model based on all variables except preference</span>
    <span class='co'>## set npseudo = 0 as all judges rank all models</span>
    <span class='no'>tm_tree</span> <span class='kw'>&lt;-</span> <span class='fu'>pltree</span>(<span class='no'>R</span> ~ <span class='no'>.</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>Topmodel2007</span>[, -<span class='fl'>1</span>], <span class='kw'>minsize</span> <span class='kw'>=</span> <span class='fl'>5</span>,
                      <span class='kw'>npseudo</span> <span class='kw'>=</span> <span class='fl'>0</span>)

    <span class='co'>## plot shows abilities constrained to sum to 1</span>
    <span class='fu'>plot</span>(<span class='no'>tm_tree</span>, <span class='kw'>abbreviate</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>yscale</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0</span>, <span class='fl'>0.5</span>))
    <span class='co'>## instead show log-abilities with Anja as reference (need to used index)</span>
    <span class='fu'>plot</span>(<span class='no'>tm_tree</span>, <span class='kw'>abbreviate</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>worth</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>ref</span> <span class='kw'>=</span> <span class='fl'>6</span>,
         <span class='kw'>yscale</span> <span class='kw'>=</span> <span class='fu'>c</span>(-<span class='fl'>1.5</span>, <span class='fl'>2.2</span>))

    <span class='co'>## log-abilities, zero sum contrast</span>
    <span class='fu'><a href='http://www.rdocumentation.org/packages/psychotools/topics/itempar'>itempar</a></span>(<span class='no'>tm_tree</span>, <span class='kw'>log</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
    <span class='co'>## abilities with Anja as reference</span>
    <span class='fu'><a href='http://www.rdocumentation.org/packages/psychotools/topics/itempar'>itempar</a></span>(<span class='no'>tm_tree</span>, <span class='kw'>ref</span> <span class='kw'>=</span> <span class='st'>"Anja"</span>)

    <span class='co'>## results for the first three judges</span>
    <span class='no'>newdata</span> <span class='kw'>&lt;-</span> <span class='no'>Topmodel2007</span>[<span class='fl'>1</span>:<span class='fl'>3</span>,]
    <span class='co'>### fitted probabilities</span>
    <span class='fu'>predict</span>(<span class='no'>tm_tree</span>, <span class='no'>newdata</span>)
    <span class='co'>### fitted log-abilities, with Anni as reference</span>
    <span class='fu'>predict</span>(<span class='no'>tm_tree</span>, <span class='no'>newdata</span>, <span class='kw'>log</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>ref</span> <span class='kw'>=</span> <span class='st'>"Anni"</span>)
    <span class='co'>###  item ranks</span>
    <span class='fu'>predict</span>(<span class='no'>tm_tree</span>, <span class='no'>newdata</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"rank"</span>)
    <span class='co'>### top ranked item</span>
    <span class='fu'>predict</span>(<span class='no'>tm_tree</span>, <span class='no'>newdata</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"best"</span>)
    <span class='co'>### node the judge belongs to</span>
    <span class='fu'>predict</span>(<span class='no'>tm_tree</span>, <span class='no'>newdata</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"node"</span>)

}</div><div class='output co'>#&gt;                                                                                               1 
#&gt; "Barbara &gt; Anni, Barbara &gt; Hana, Anni &gt; Hana, Barbara &gt; Fiona, Fiona &gt; Anni, Fiona &gt; Hana, ..." 
#&gt;                                                                                               2 
#&gt; "Anni &gt; Barbara, Hana &gt; Barbara, Hana &gt; Anni, Fiona &gt; Barbara, Anni &gt; Fiona, Hana &gt; Fiona, ..." </div><div class='img'><img src='pltree-3.png' alt='' width='700' height='432.632880098887' /></div><div class='img'><img src='pltree-4.png' alt='' width='700' height='432.632880098887' /></div><div class='output co'>#&gt;   1   2   3 
#&gt; "7" "3" "3" </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Heather Turner, Ioannis Kosmidis, David Firth.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
