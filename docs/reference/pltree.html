<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plackett-Luce Trees — pltree • PlackettLuce</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="Plackett-Luce Trees — pltree" />

<meta property="og:description" content="Recursive partitioning based on Plackett-Luce models." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PlackettLuce</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Overview.html">Introduction to PlackettLuce</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plackett-Luce Trees</h1>
    
    <div class="hidden name"><code>pltree.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Recursive partitioning based on Plackett-Luce models.</p>
    
    </div>

    <pre class="usage"><span class='fu'>pltree</span>(<span class='no'>formula</span>, <span class='no'>data</span>, <span class='no'>subset</span>, <span class='no'>na.action</span>, <span class='no'>cluster</span>, <span class='kw'>ref</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>a symbolic description of the model to be fitted, of the form
<code>y ~ x1 + ... + xn</code> where <code>y</code> should be an object of class
<code><a href='PlackettLuce-deprecated.html'>grouped_rankings</a></code> and <code>x1</code>, &#8230;, <code>xn</code> are used as
partitioning variables.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>an optional data frame containing the variables in the model.</p></td>
    </tr>
    <tr>
      <th>subset</th>
      <td><p>A specification of the rows to be used, passed to
<code><a href='https://www.rdocumentation.org/packages/stats/topics/model.frame'>model.frame</a></code>.</p></td>
    </tr>
    <tr>
      <th>na.action</th>
      <td><p>how NAs are treated, applied to the underlying rankings and
then passed to <code><a href='https://www.rdocumentation.org/packages/stats/topics/model.frame'>model.frame</a></code>.</p></td>
    </tr>
    <tr>
      <th>cluster</th>
      <td><p>an optional vector of cluster IDs to be employed for clustered
covariances in the parameter stability tests, see <code>mob</code>.</p></td>
    </tr>
    <tr>
      <th>ref</th>
      <td><p>an integer or character string specifying the reference item (for
which log ability will be set to zero). If NULL the first item is used.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments, passed to <code><a href='PlackettLuce.html'>PlackettLuce</a></code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>"pltree"</code> inheriting from <code>"bttree"</code>
and <code>"modelparty"</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Plackett-Luce trees are an application of model-based recursive partitioning
(implemented in <code><a href='https://www.rdocumentation.org/packages/partykit/topics/mob'>mob</a></code>) to Plackett-Luce models for
rankings. The partitioning is based on ranking covariates, e.g. attributes of
the judge making the ranking, or conditions under which the ranking is made.
The response should be a <code><a href='PlackettLuce-deprecated.html'>grouped_rankings</a></code> object that groups
rankings with common covariate values. This may be included in a data frame
alongside the covariates.</p>
<p>Most arguments of <code>PlackettLuce</code> can be passed on by <code>pltree</code>.
However, Plackett-Luce tree with fixed adherence are not implemented.
Arguably it makes more sense to estimate adherence or reliability within
the nodes of the Plackett-Luce tree.</p>
<p>Various methods are provided for <code>"pltree"</code> objects, most of them
inherited from <code>"modelparty"</code> objects (e.g. <code>print</code>,
<code>summary</code>), or <code>"bttree"</code> objects (<code>plot</code>). The plot
method employs the <code><a href='https://www.rdocumentation.org/packages/psychotree/topics/node_btplot'>node_btplot</a></code>
panel-generating function. The See Also
section gives details of separately documented methods.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://www.rdocumentation.org/packages/psychotree/topics/bttree'>bttree</a></code> For fitting Bradley-Terry trees
(equivalent to the Plackett-Luce model for paired comparisons without ties).</p>
<p><code>coef</code>, <code>vcov</code>, <code>AIC</code> and <code>predict</code> methods are documented on
<code><a href='pltree-summaries.html'>pltree-summaries</a></code>.</p>
<p><code><a href='itempar.PlackettLuce.html'>itempar</a></code>, extracts the abilities or item parameters
in each node of the tree using <code><a href='itempar.PlackettLuce.html'>itempar.PlackettLuce</a></code>.</p>
<p><code><a href='fitted.PlackettLuce.html'>fitted</a></code>, computes probabilities for the observed
choices based on the full tree.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Bradley-Terry example</span>

<span class='kw'>if</span> (<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>require</a></span>(<span class='no'>psychotree</span>)){
    <span class='co'>## Germany's Next Topmodel 2007 data</span>
    <span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='st'>"Topmodel2007"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"psychotree"</span>)
    <span class='co'>## convert paircomp object to grouped rankings</span>
    <span class='no'>R</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='group.html'>as.grouped_rankings</a></span>(<span class='no'>Topmodel2007</span>$<span class='no'>preference</span>)
    <span class='co'>## rankings are grouped by judge</span>
    <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>R</span>[<span class='fl'>1</span>:<span class='fl'>2</span>,], <span class='kw'>max</span> <span class='kw'>=</span> <span class='fl'>4</span>)
    <span class='co'>## Topmodel2007[, -1] gives covariate values for each judge</span>
    <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>Topmodel2007</span>[<span class='fl'>1</span>:<span class='fl'>2</span>, -<span class='fl'>1</span>])

    <span class='co'>## fit partition model based on all variables except preference</span>
    <span class='co'>## set npseudo = 0 as all judges rank all models</span>
    <span class='no'>tm_tree</span> <span class='kw'>&lt;-</span> <span class='fu'>pltree</span>(<span class='no'>R</span> ~ <span class='no'>.</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>Topmodel2007</span>[, -<span class='fl'>1</span>], <span class='kw'>minsize</span> <span class='kw'>=</span> <span class='fl'>5</span>,
                      <span class='kw'>npseudo</span> <span class='kw'>=</span> <span class='fl'>0</span>)

    <span class='co'>## plot shows abilities constrained to sum to 1</span>
    <span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>tm_tree</span>, <span class='kw'>abbreviate</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>yscale</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>0.5</span>))
    <span class='co'>## instead show log-abilities with Anja as reference (need to used index)</span>
    <span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>tm_tree</span>, <span class='kw'>abbreviate</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>worth</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>ref</span> <span class='kw'>=</span> <span class='fl'>6</span>,
         <span class='kw'>yscale</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(-<span class='fl'>1.5</span>, <span class='fl'>2.2</span>))

    <span class='co'>## log-abilities, zero sum contrast</span>
    <span class='fu'><a href='https://www.rdocumentation.org/packages/psychotools/topics/itempar'>itempar</a></span>(<span class='no'>tm_tree</span>, <span class='kw'>log</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
}</div><div class='output co'>#&gt; <span class='message'>Loading required package: psychotree</span></div><div class='output co'>#&gt; <span class='message'>Loading required package: partykit</span></div><div class='output co'>#&gt; <span class='message'>Loading required package: grid</span></div><div class='output co'>#&gt; <span class='message'>Loading required package: libcoin</span></div><div class='output co'>#&gt; <span class='message'>Loading required package: mvtnorm</span></div><div class='output co'>#&gt; <span class='message'>Loading required package: psychotools</span></div><div class='output co'>#&gt;                                                                   1 
#&gt; "Barbara &gt; Anni, Barbara &gt; Hana, Anni &gt; Hana, Barbara &gt; Fiona, ..." 
#&gt;                                                                   2 
#&gt; "Anni &gt; Barbara, Hana &gt; Barbara, Hana &gt; Anni, Fiona &gt; Barbara, ..." 
#&gt;   gender age  q1  q2  q3
#&gt; 1   male  66  no  no  no
#&gt; 2   male  21 yes yes yes</div><div class='img'><img src='pltree-1.png' alt='' width='700' height='433' /></div><div class='img'><img src='pltree-2.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt;     Barbara       Anni       Hana      Fiona       Mandy       Anja
#&gt; 3 0.3252815  0.2193055 1.03734300 -0.1785927 -0.39080852 -1.0125288
#&gt; 5 0.1106734 -0.2392155 0.51830152  0.3662483 -0.42801793 -0.3279899
#&gt; 6 0.5715647  0.3486194 0.06927133  0.2590188 -0.87250734 -0.3759669
#&gt; 7 0.5343475 -1.0000476 0.01067104  0.0575107  0.08093274  0.3165856</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Heather Turner, Ioannis Kosmidis, David Firth.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

